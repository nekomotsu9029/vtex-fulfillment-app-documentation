<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>raw-body | Vtex Fulfillment</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Vtex Fulfillment">
    
    <link rel="preload" href="/assets/css/0.styles.3061e395.css" as="style"><link rel="preload" href="/assets/js/app.59a89a19.js" as="script"><link rel="preload" href="/assets/js/2.f5d6c467.js" as="script"><link rel="preload" href="/assets/js/88.5ef25d39.js" as="script"><link rel="prefetch" href="/assets/js/10.415eeb21.js"><link rel="prefetch" href="/assets/js/100.190d4fef.js"><link rel="prefetch" href="/assets/js/101.941b4ae1.js"><link rel="prefetch" href="/assets/js/102.0cdcc356.js"><link rel="prefetch" href="/assets/js/103.e438324a.js"><link rel="prefetch" href="/assets/js/104.f64da612.js"><link rel="prefetch" href="/assets/js/105.2405f5aa.js"><link rel="prefetch" href="/assets/js/106.cc8587ef.js"><link rel="prefetch" href="/assets/js/107.1bd7eb1e.js"><link rel="prefetch" href="/assets/js/108.407470d4.js"><link rel="prefetch" href="/assets/js/11.155acf61.js"><link rel="prefetch" href="/assets/js/12.cabd7b26.js"><link rel="prefetch" href="/assets/js/13.d6b953f1.js"><link rel="prefetch" href="/assets/js/14.44512d36.js"><link rel="prefetch" href="/assets/js/15.ccd8dda4.js"><link rel="prefetch" href="/assets/js/16.8bd90e83.js"><link rel="prefetch" href="/assets/js/17.7b68a674.js"><link rel="prefetch" href="/assets/js/18.41471dfa.js"><link rel="prefetch" href="/assets/js/19.9e93238c.js"><link rel="prefetch" href="/assets/js/20.0ba4b9a8.js"><link rel="prefetch" href="/assets/js/21.1d4074c1.js"><link rel="prefetch" href="/assets/js/22.79996c3c.js"><link rel="prefetch" href="/assets/js/23.234f205d.js"><link rel="prefetch" href="/assets/js/24.bcf1a4b0.js"><link rel="prefetch" href="/assets/js/25.1758eb98.js"><link rel="prefetch" href="/assets/js/26.80363222.js"><link rel="prefetch" href="/assets/js/27.58debdbd.js"><link rel="prefetch" href="/assets/js/28.da19028a.js"><link rel="prefetch" href="/assets/js/29.aee52c88.js"><link rel="prefetch" href="/assets/js/3.0a44f056.js"><link rel="prefetch" href="/assets/js/30.d88136e9.js"><link rel="prefetch" href="/assets/js/31.2f0d95c9.js"><link rel="prefetch" href="/assets/js/32.0ae4bb04.js"><link rel="prefetch" href="/assets/js/33.123c65c5.js"><link rel="prefetch" href="/assets/js/34.4be025cf.js"><link rel="prefetch" href="/assets/js/35.43201dc0.js"><link rel="prefetch" href="/assets/js/36.edb21554.js"><link rel="prefetch" href="/assets/js/37.0f012be0.js"><link rel="prefetch" href="/assets/js/38.f394ed2f.js"><link rel="prefetch" href="/assets/js/39.3cc0c6df.js"><link rel="prefetch" href="/assets/js/4.2dd46112.js"><link rel="prefetch" href="/assets/js/40.27cdd3cc.js"><link rel="prefetch" href="/assets/js/41.dfe4db2e.js"><link rel="prefetch" href="/assets/js/42.05d0fa0e.js"><link rel="prefetch" href="/assets/js/43.459f33d1.js"><link rel="prefetch" href="/assets/js/44.e1f6cb74.js"><link rel="prefetch" href="/assets/js/45.2ab95ba2.js"><link rel="prefetch" href="/assets/js/46.b65d5f54.js"><link rel="prefetch" href="/assets/js/47.db38f711.js"><link rel="prefetch" href="/assets/js/48.e58909bf.js"><link rel="prefetch" href="/assets/js/49.94073314.js"><link rel="prefetch" href="/assets/js/5.57a4b541.js"><link rel="prefetch" href="/assets/js/50.eeaa8e25.js"><link rel="prefetch" href="/assets/js/51.6d267944.js"><link rel="prefetch" href="/assets/js/52.b871be43.js"><link rel="prefetch" href="/assets/js/53.ecced200.js"><link rel="prefetch" href="/assets/js/54.6a918fda.js"><link rel="prefetch" href="/assets/js/55.d1f0ae14.js"><link rel="prefetch" href="/assets/js/56.559f83b1.js"><link rel="prefetch" href="/assets/js/57.baba4cb6.js"><link rel="prefetch" href="/assets/js/58.8b5f54b3.js"><link rel="prefetch" href="/assets/js/59.3f1e7162.js"><link rel="prefetch" href="/assets/js/6.2c643b4c.js"><link rel="prefetch" href="/assets/js/60.ab36b2bd.js"><link rel="prefetch" href="/assets/js/61.417448a6.js"><link rel="prefetch" href="/assets/js/62.0956c8c7.js"><link rel="prefetch" href="/assets/js/63.6005c93b.js"><link rel="prefetch" href="/assets/js/64.37751e6a.js"><link rel="prefetch" href="/assets/js/65.b52687b6.js"><link rel="prefetch" href="/assets/js/66.175cf88a.js"><link rel="prefetch" href="/assets/js/67.2167ef88.js"><link rel="prefetch" href="/assets/js/68.f04ee6cf.js"><link rel="prefetch" href="/assets/js/69.d6f7a8a8.js"><link rel="prefetch" href="/assets/js/7.709b7d09.js"><link rel="prefetch" href="/assets/js/70.8790e8b3.js"><link rel="prefetch" href="/assets/js/71.ff0753fc.js"><link rel="prefetch" href="/assets/js/72.c5c8fd8f.js"><link rel="prefetch" href="/assets/js/73.5e3d7f75.js"><link rel="prefetch" href="/assets/js/74.722f4d10.js"><link rel="prefetch" href="/assets/js/75.38061b5e.js"><link rel="prefetch" href="/assets/js/76.94eb2e72.js"><link rel="prefetch" href="/assets/js/77.7f036229.js"><link rel="prefetch" href="/assets/js/78.d35183de.js"><link rel="prefetch" href="/assets/js/79.95e687c5.js"><link rel="prefetch" href="/assets/js/8.1578eca0.js"><link rel="prefetch" href="/assets/js/80.2e33be2c.js"><link rel="prefetch" href="/assets/js/81.137c6330.js"><link rel="prefetch" href="/assets/js/82.955191f0.js"><link rel="prefetch" href="/assets/js/83.1f1e18fe.js"><link rel="prefetch" href="/assets/js/84.b953ef9a.js"><link rel="prefetch" href="/assets/js/85.e12df437.js"><link rel="prefetch" href="/assets/js/86.2cfd413f.js"><link rel="prefetch" href="/assets/js/87.1552743e.js"><link rel="prefetch" href="/assets/js/89.ebdb1430.js"><link rel="prefetch" href="/assets/js/9.9161e23f.js"><link rel="prefetch" href="/assets/js/90.f971e7fe.js"><link rel="prefetch" href="/assets/js/91.d367d5bb.js"><link rel="prefetch" href="/assets/js/92.620ddd0a.js"><link rel="prefetch" href="/assets/js/93.71672e68.js"><link rel="prefetch" href="/assets/js/94.3fc83170.js"><link rel="prefetch" href="/assets/js/95.db9b08b8.js"><link rel="prefetch" href="/assets/js/96.500004b0.js"><link rel="prefetch" href="/assets/js/97.c9a0032e.js"><link rel="prefetch" href="/assets/js/98.8bd8dbff.js"><link rel="prefetch" href="/assets/js/99.cefc1c9d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3061e395.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Vtex Fulfillment</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/picking-packing/" class="nav-link">
  Picking &amp; packing
</a></div><div class="nav-item"><a href="/picking-mobile/" class="nav-link">
  Picking mobile
</a></div><div class="nav-item"><a href="/tracking/" class="nav-link">
  Tracking
</a></div><div class="nav-item"><a href="/support/" class="nav-link">
  Support
</a></div><div class="nav-item"><a href="/insights/" class="nav-link">
  Insights
</a></div><div class="nav-item"><a href="/settings/" class="nav-link">
  Settings
</a></div><div class="nav-item"><a href="/users/" class="nav-link">
  Users
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/picking-packing/" class="nav-link">
  Picking &amp; packing
</a></div><div class="nav-item"><a href="/picking-mobile/" class="nav-link">
  Picking mobile
</a></div><div class="nav-item"><a href="/tracking/" class="nav-link">
  Tracking
</a></div><div class="nav-item"><a href="/support/" class="nav-link">
  Support
</a></div><div class="nav-item"><a href="/insights/" class="nav-link">
  Insights
</a></div><div class="nav-item"><a href="/settings/" class="nav-link">
  Settings
</a></div><div class="nav-item"><a href="/users/" class="nav-link">
  Users
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="raw-body"><a href="#raw-body" class="header-anchor">#</a> raw-body</h1> <p><a href="https://npmjs.org/package/raw-body" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/v/raw-body.svg" alt="NPM Version"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://npmjs.org/package/raw-body" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/dm/raw-body.svg" alt="NPM Downloads"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/node/v/raw-body.svg" alt="Node.js Version"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://travis-ci.org/stream-utils/raw-body" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/travis/stream-utils/raw-body/master.svg" alt="Build status"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://coveralls.io/r/stream-utils/raw-body?branch=master" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/coveralls/stream-utils/raw-body/master.svg" alt="Test coverage"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Gets the entire buffer of a stream either as a <code>Buffer</code> or a string.
Validates the stream's length against an expected length and maximum limit.
Ideal for parsing request bodies.</p> <h2 id="install"><a href="#install" class="header-anchor">#</a> Install</h2> <p>This is a <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> module available through the
<a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">npm registry<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Installation is done using the
<a href="https://docs.npmjs.com/getting-started/installing-npm-packages-locally" target="_blank" rel="noopener noreferrer"><code>npm install</code> command<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">npm</span> <span class="token function">install</span> raw-body
</code></pre></div><h3 id="typescript"><a href="#typescript" class="header-anchor">#</a> TypeScript</h3> <p>This module includes a <a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer">TypeScript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
declaration file to enable auto complete in compatible editors and type
information for TypeScript projects. This module depends on the Node.js
types, so install <code>@types/node</code>:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">npm</span> <span class="token function">install</span> @types/node
</code></pre></div><h2 id="api"><a href="#api" class="header-anchor">#</a> API</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> getRawBody <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'raw-body'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="getrawbody-stream-options-callback"><a href="#getrawbody-stream-options-callback" class="header-anchor">#</a> getRawBody(stream, [options], [callback])</h3> <p><strong>Returns a promise if no callback specified and global <code>Promise</code> exists.</strong></p> <p>Options:</p> <ul><li><code>length</code> - The length of the stream.
If the contents of the stream do not add up to this length,
an <code>400</code> error code is returned.</li> <li><code>limit</code> - The byte limit of the body.
This is the number of bytes or any string format supported by
<a href="https://www.npmjs.com/package/bytes" target="_blank" rel="noopener noreferrer">bytes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,
for example <code>1000</code>, <code>'500kb'</code> or <code>'3mb'</code>.
If the body ends up being larger than this limit,
a <code>413</code> error code is returned.</li> <li><code>encoding</code> - The encoding to use to decode the body into a string.
By default, a <code>Buffer</code> instance will be returned when no encoding is specified.
Most likely, you want <code>utf-8</code>, so setting <code>encoding</code> to <code>true</code> will decode as <code>utf-8</code>.
You can use any type of encoding supported by <a href="https://www.npmjs.org/package/iconv-lite#readme" target="_blank" rel="noopener noreferrer">iconv-lite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li></ul> <p>You can also pass a string in place of options to just specify the encoding.</p> <p>If an error occurs, the stream will be paused, everything unpiped,
and you are responsible for correctly disposing the stream.
For HTTP requests, no handling is required if you send a response.
For streams that use file descriptors, you should <code>stream.destroy()</code> or <code>stream.close()</code> to prevent leaks.</p> <h2 id="errors"><a href="#errors" class="header-anchor">#</a> Errors</h2> <p>This module creates errors depending on the error condition during reading.
The error may be an error from the underlying Node.js implementation, but is
otherwise an error created by this module, which has the following attributes:</p> <ul><li><code>limit</code> - the limit in bytes</li> <li><code>length</code> and <code>expected</code> - the expected length of the stream</li> <li><code>received</code> - the received bytes</li> <li><code>encoding</code> - the invalid encoding</li> <li><code>status</code> and <code>statusCode</code> - the corresponding status code for the error</li> <li><code>type</code> - the error type</li></ul> <h3 id="types"><a href="#types" class="header-anchor">#</a> Types</h3> <p>The errors from this module have a <code>type</code> property which allows for the progamatic
determination of the type of error returned.</p> <h4 id="encoding-unsupported"><a href="#encoding-unsupported" class="header-anchor">#</a> encoding.unsupported</h4> <p>This error will occur when the <code>encoding</code> option is specified, but the value does
not map to an encoding supported by the <a href="https://www.npmjs.org/package/iconv-lite#readme" target="_blank" rel="noopener noreferrer">iconv-lite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
module.</p> <h4 id="entity-too-large"><a href="#entity-too-large" class="header-anchor">#</a> entity.too.large</h4> <p>This error will occur when the <code>limit</code> option is specified, but the stream has
an entity that is larger.</p> <h4 id="request-aborted"><a href="#request-aborted" class="header-anchor">#</a> request.aborted</h4> <p>This error will occur when the request stream is aborted by the client before
reading the body has finished.</p> <h4 id="request-size-invalid"><a href="#request-size-invalid" class="header-anchor">#</a> request.size.invalid</h4> <p>This error will occur when the <code>length</code> option is specified, but the stream has
emitted more bytes.</p> <h4 id="stream-encoding-set"><a href="#stream-encoding-set" class="header-anchor">#</a> stream.encoding.set</h4> <p>This error will occur when the given stream has an encoding set on it, making it
a decoded stream. The stream should not have an encoding set and is expected to
emit <code>Buffer</code> objects.</p> <h2 id="examples"><a href="#examples" class="header-anchor">#</a> Examples</h2> <h3 id="simple-express-example"><a href="#simple-express-example" class="header-anchor">#</a> Simple Express example</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> contentType <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> getRawBody <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'raw-body'</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">getRawBody</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    length<span class="token operator">:</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'content-length'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    limit<span class="token operator">:</span> <span class="token string">'1mb'</span><span class="token punctuation">,</span>
    encoding<span class="token operator">:</span> contentType<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">.</span>parameters<span class="token punctuation">.</span>charset
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>text <span class="token operator">=</span> string
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// now access req.text</span>
</code></pre></div><h3 id="simple-koa-example"><a href="#simple-koa-example" class="header-anchor">#</a> Simple Koa example</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> contentType <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> getRawBody <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'raw-body'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa'</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token operator">*</span> <span class="token punctuation">(</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">getRawBody</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>req<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    length<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'content-length'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    limit<span class="token operator">:</span> <span class="token string">'1mb'</span><span class="token punctuation">,</span>
    encoding<span class="token operator">:</span> contentType<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>req<span class="token punctuation">)</span><span class="token punctuation">.</span>parameters<span class="token punctuation">.</span>charset
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">yield</span> next
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// now access this.text</span>
</code></pre></div><h3 id="using-as-a-promise"><a href="#using-as-a-promise" class="header-anchor">#</a> Using as a promise</h3> <p>To use this library as a promise, simply omit the <code>callback</code> and a promise is
returned, provided that a global <code>Promise</code> is defined.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> getRawBody <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'raw-body'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">getRawBody</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">buf</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>buf<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token string">' bytes submitted'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">500</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="using-with-typescript"><a href="#using-with-typescript" class="header-anchor">#</a> Using with TypeScript</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> getRawBody <span class="token keyword">from</span> <span class="token string">'raw-body'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> http <span class="token keyword">from</span> <span class="token string">'http'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">getRawBody</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>buf<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token string">' bytes submitted'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> err<span class="token punctuation">.</span>statusCode<span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="license"><a href="#license" class="header-anchor">#</a> License</h2> <p><a href="LICENSE">MIT</a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.59a89a19.js" defer></script><script src="/assets/js/2.f5d6c467.js" defer></script><script src="/assets/js/88.5ef25d39.js" defer></script>
  </body>
</html>
